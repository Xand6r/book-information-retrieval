(function(t){function e(e){for(var r,i,s=e[0],u=e[1],c=e[2],d=0,v=[];d<s.length;d++)i=s[d],a[i]&&v.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(v.length)v.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],r=!0,s=1;s<o.length;s++){var u=o[s];0!==a[u]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=o[0]))}return t}var r={},a={app:0},n=[];function i(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=r,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var r=o("64a9"),a=o.n(r);a.a},"0918":function(t,e,o){},"0ea5":function(t,e,o){},"14ef":function(t,e,o){},"153e":function(t,e,o){},2044:function(t,e,o){},"292b":function(t,e,o){"use strict";var r=o("361b"),a=o.n(r);a.a},2976:function(t,e,o){},"2b43":function(t,e,o){},"2ff8":function(t,e,o){"use strict";var r=o("153e"),a=o.n(r);a.a},"361b":function(t,e,o){},"4cf4":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var r=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},n=[],i=(o("034f"),o("2877")),s={},u=Object(i["a"])(s,a,n,!1,null,null,null),c=u.exports,l=o("8c4f"),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),t._m(0),o("Random"),o("Footer")],1)},v=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"searchBox"},[o("div",{staticClass:"content"},[o("p",[t._v("Find a book")])])])}],m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pad-top-bottom",attrs:{id:"navigation"}},[t._m(0),o("div",{staticClass:"accounts"},[o("h1",{on:{click:t.showMenu}},[t._v("☰")])]),o("div",{attrs:{id:"menus"}},[o("div",{staticClass:"links"},[o("ul",[o("li",[o("router-link",{attrs:{to:"/Home"}},[t._v("Home")])],1),o("li",[o("router-link",{attrs:{to:"/search"}},[t._v("Search")])],1),t.allowAdmins?o("li",[o("router-link",{attrs:{to:"/createBook"}},[t._v("Create Book")])],1):t._e(),o("li",[o("router-link",{attrs:{to:"/viewRequest"}},[t._v("View Request Book")])],1),o("li",[o("button",{on:{click:t.logout}},[t._v("Logout")])])])])])])},f=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"brandName"},[o("h1",[t._v("Book Information Retrieval")])])}],p={data:function(){return{allowAdmins:Boolean}},methods:{showMenu:function(){var t=document.querySelector("#menus");t.classList.toggle("active")},logout:function(t){t.preventDefault();var e=window.localStorage.getItem("user");e&&(window.localStorage.removeItem("user"),this.$router.push("/"))}},mounted:function(){var t=JSON.parse(window.localStorage.getItem("user"));"student"===t.status||"staff"===t.status?this.allowAdmins=!1:this.allowAdmins=!0}},h=p,g=(o("9028"),Object(i["a"])(h,m,f,!1,null,null,null)),_=g.exports,y=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"footer"}},[o("p",[t._v("© 2019 - Book Information Retrieval System")])])}],k={},w=k,q=(o("b35c"),Object(i["a"])(w,y,b,!1,null,"ebb952dc",null)),C=q.exports,B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"Random"}},t._l(t.randomBooks,function(e,r){return o("div",{key:r,attrs:{id:"bookCard"}},[o("div",{staticClass:"banner"}),o("div",{staticClass:"content"},[o("h2",[t._v(t._s(e.title))]),o("h3",[t._v(t._s(e.author))]),o("div",[o("p",[t._v(t._s(new Date(e.publicationYear).getFullYear()))]),o("p",[t._v(t._s(e.edition))]),o("p",[t._v("Available: "),o("span",[t._v(t._s(e.quantity))])])])])])}),0)},P=[],S={data:function(){return{randomBooks:[]}},mounted:function(){var t=this;fetch("/books/random").then(function(t){return t.json()}).then(function(e){t.randomBooks=e.slice()})}},x=S,E=(o("cd36"),Object(i["a"])(x,B,P,!1,null,"cf8fd1dc",null)),N=E.exports,O={components:{Navigation:_,Random:N,Footer:C},data:function(){return{searchParam:""}},methods:{mainSearch:function(){this.$router.push()}},mounted:function(){var t=window.localStorage.getItem("user");if(t)return!0;this.$router.push("/")}},$=O,j=(o("6f6b"),Object(i["a"])($,d,v,!1,null,"e8438c5e",null)),A=j.exports,R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"wraps"}},[o("div",{attrs:{id:"createBookForm"}},[o("h3",[t._v("Create New Book Record")]),o("form",{attrs:{action:"",method:"post"},on:{submit:function(t){t.preventDefault()}}},[o("Loader"),o("div",[t._m(0),o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"",id:"book-title",required:"required",placeholder:"Book Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),o("div",[t._m(1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",name:"",id:"author-name",required:"required",placeholder:"Author's Name"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),o("div",[t._m(2),o("input",{directives:[{name:"model",rawName:"v-model",value:t.edition,expression:"edition"}],attrs:{type:"text",name:"",id:"edition",required:"required",placeholder:"6th Edition"},domProps:{value:t.edition},on:{input:function(e){e.target.composing||(t.edition=e.target.value)}}})]),o("div",[o("label",{attrs:{for:""}},[t._v("Quantity")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{type:"text",name:"",id:"",placeholder:"1"},domProps:{value:t.qty},on:{input:function(e){e.target.composing||(t.qty=e.target.value)}}})]),o("div",[t._m(3),o("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{name:"book-category",required:"required",id:"book-categorry"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.category=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"0",disabled:""}},[t._v("Choose Book Category")]),t._l(t.categories,function(e,r){return o("option",{key:r,domProps:{value:e}},[t._v(t._s(e))])})],2)]),o("div",[t._m(4),o("input",{directives:[{name:"model",rawName:"v-model",value:t.yearOfPub,expression:"yearOfPub"}],attrs:{type:"text",name:"",id:"year",required:"required",placeholder:"1995"},domProps:{value:t.yearOfPub},on:{input:function(e){e.target.composing||(t.yearOfPub=e.target.value)}}})]),o("div",[o("button",{attrs:{type:"submit"},on:{click:t.createBook}},[t._v("Submit New Book")])])],1)])]),o("Footer")],1)},D=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"book-title"}},[t._v("\n            Book Title\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"author-name"}},[t._v("\n            Author\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"edition"}},[t._v("\n            Edition\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"book-category"}},[t._v("\n            Book Category\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"year"}},[t._v("\n            Year of Publication\n            "),o("span",{staticClass:"required"},[t._v("*")])])}],T=o("f499"),L=o.n(T),I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"loader"}})},F=[],Y={},H=Y,J=(o("e162"),Object(i["a"])(H,I,F,!1,null,"0c73705e",null)),M=J.exports,U={components:{Navigation:_,Loader:M,Footer:C},data:function(){return{qty:"",title:"",author:"",edition:"",category:"",yearOfPub:"",categories:[]}},methods:{createBook:function(){var t=this,e=document.querySelector("#loader"),o={title:this.title,author:this.author,edition:this.edition,category:this.category,quantity:this.qty,publicationYear:this.yearOfPub};if(""!==(this.title&&this.author&&this.edition&&this.publisher&&this.category&&this.yearOfPub)&&e){e.classList.add("active");var r="/books/addBook";fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:L()(o)}).then(function(t){return t.json()}).then(function(o){return alert("Book Created Successfully"),e.classList.remove("active"),t.$router.push("/Home")}).catch(function(t){return console.log("Error:",t)})}}},mounted:function(){var t=this,e=window.localStorage.getItem("user");console.log(this),e?fetch("/books/categories").then(function(t){return t.json()}).then(function(e){return t.categories=e.slice()}):this.$router.push("/")}},Q=U,V=(o("292b"),Object(i["a"])(Q,R,D,!1,null,null,null)),K=V.exports,z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"search-w"}},[o("Search",{on:{search:t.find}}),o("div",{attrs:{id:"search-result"}},[o("Loader"),o("div",{staticClass:"result"},[o("h3",{attrs:{id:"header"}},[t._v("Search Results")]),t._l(t.searchResult,function(e,r){return o("div",{key:r,attrs:{id:"book-search-result-card"}},[o("h4",[t._v(t._s(e.title))]),o("h5",[t._v(t._s(e.author))]),o("h6",[t._v(t._s(new Date(e.publicationYear).getFullYear()))]),o("h6",[t._v(t._s(e.edition))]),o("p",{on:{click:function(o){return t.viewChildren(e._id)}}},[t._v("\n            Quantity Available:\n            "),o("span",{attrs:{id:"availability"}},[t._v(t._s(e.quantity))])]),o("div",[t.isAdmin?o("button",{attrs:{id:"edit"},on:{click:function(o){return t.editBook(e._id)}}},[t._v("edit")]):t._e(),t.isAdmin?o("button",{attrs:{id:"delete"},on:{click:function(o){return t.bookDelete(e._id)}}},[t._v("delete")]):t._e()])])})],2)],1)],1),o("Footer")],1)},G=[],W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"search-form"}},[o("form",{attrs:{action:"",method:"get"},on:{submit:function(t){t.preventDefault()}}},[o("h3",[t._v("Search for a Book")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.searchCategory,expression:"searchCategory"}],attrs:{name:"",id:"set"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.searchCategory=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"author"}},[t._v("By Author")]),o("option",{attrs:{value:"title"}},[t._v("By Title")]),o("option",{attrs:{value:"category"}},[t._v("By Category")])]),"title"==t.searchCategory?o("div",[o("label",{attrs:{for:"book-title"}},[t._v("Book Title")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.paramDict["title"],expression:"paramDict['title']"}],attrs:{type:"text",name:"",id:"book-title",placeholder:"eg: Control Engineering"},domProps:{value:t.paramDict["title"]},on:{input:function(e){e.target.composing||t.$set(t.paramDict,"title",e.target.value)}}})]):"author"==t.searchCategory?o("div",[o("label",{attrs:{for:"book-author"}},[t._v("Book Author")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.paramDict["author"],expression:"paramDict['author']"}],attrs:{type:"text",name:"",id:"book-author",placeholder:"eg: B. K. Oguta"},domProps:{value:t.paramDict["author"]},on:{input:function(e){e.target.composing||t.$set(t.paramDict,"author",e.target.value)}}})]):o("div",[o("label",{attrs:{for:"book-category"}},[t._v("Book Category")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.paramDict["category"],expression:"paramDict['category']"}],attrs:{name:"",id:"book-category"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.paramDict,"category",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:""}},[t._v("Choose Book Category")]),t._l(t.categories,function(e,r){return o("option",{key:r,domProps:{value:e}},[t._v(t._s(e))])})],2)]),o("div",[o("button",{attrs:{type:"submit"},on:{click:t.search}},[t._v("Search")])])])])},X=[],Z={data:function(){return{paramDict:{author:null,category:null,title:null},bookTitle:"",bookAuthor:"",category:"",searchCategory:"author",isActive:!1,categories:[],searchResult:[]}},methods:{search:function(){var t=this,e=document.querySelector("#loader"),o=document.querySelector("#header");e&&e.classList.add("active");var r="/books/".concat(this.searchCategory,"/").concat(this.paramDict[this.searchCategory]);fetch(r).then(function(t){return t.json()}).then(function(r){0!==r.length?(e.classList.remove("active"),document.querySelector(".result").classList.add("active"),t.searchResult=r.slice(),o.innerHTML="Search Results",t.$emit("search",t.searchResult)):(e.classList.remove("active"),document.querySelector(".result").classList.add("active"),o.innerHTML="No record found")}).catch(function(){e.classList.remove("active"),alert("Search Unsuccessful")})}},mounted:function(){var t=this;fetch("/books/categories").then(function(t){return t.json()}).then(function(e){return t.categories=e.slice()})}},tt=Z,et=(o("5b7d"),Object(i["a"])(tt,W,X,!1,null,"3b79bbd3",null)),ot=et.exports,rt={components:{Navigation:_,Search:ot,Loader:M,Footer:C},data:function(){return{isActive:!1,isAdmin:Boolean,searchResult:[]}},methods:{find:function(t){this.searchResult=t.slice()},viewChildren:function(t){this.$router.push({path:"/viewBooks/".concat(t)})},requestBook:function(t,e){var o=JSON.parse(window.localStorage.getItem("user")),r=o._id,a=o.username;fetch("/requests/addRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:L()({userId:r,requesterName:a,bookId:t})}).then(function(t){return t.json()}).then(function(t){window.localStorage.setItem("user",L()(t)),alert("Book as being requested"),console.log(t)})},editBook:function(t){this.$router.push({path:"/updateBook/".concat(t)})},bookDelete:function(t){var e=this;fetch("/books/remove/".concat(t)).then(function(t){return t.json()}).then(function(o){"unsuccesful"===o.status?alert("Book not deleted"):(alert("Book deleted"),e.searchResult=e.searchResult.filter(function(e){return e._id!==t}))}).catch(function(){alert("Book not Deleted")})}},mounted:function(){var t=window.localStorage.getItem("user");if(t){var e=JSON.parse(t);return"student"===e.status||"staff"===e.status?this.isAdmin=!1:this.isAdmin=!0,!0}this.$router.push("/")}},at=rt,nt=(o("9e64"),Object(i["a"])(at,z,G,!1,null,null,null)),it=nt.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"content-w"}},[o("div",{attrs:{id:"wraps"}},[o("div",{attrs:{id:"updateBookRecord"}},[o("h3",[t._v("Update Book Record")]),o("form",{attrs:{action:"",method:"post"},on:{submit:function(t){t.preventDefault()}}},[o("div",[t._m(0),o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"",id:"title",required:"required",placeholder:"Book Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),o("div",[t._m(1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",name:"",id:"author-name",required:"required",placeholder:"Author's Name"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),o("div",[o("label",{attrs:{for:""}},[t._v("Edition")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.edition,expression:"edition"}],attrs:{type:"text",id:"",placeholder:"edition"},domProps:{value:t.edition},on:{input:function(e){e.target.composing||(t.edition=e.target.value)}}})]),o("div",[o("label",{attrs:{for:""}},[t._v("Quantity")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{type:"text",id:"",placeholder:"Book Publisher"},domProps:{value:t.qty},on:{input:function(e){e.target.composing||(t.qty=e.target.value)}}})]),o("div",[t._m(2),o("select",{directives:[{name:"model",rawName:"v-model",value:t.bookCategory,expression:"bookCategory"}],attrs:{name:"book-category",required:"required",id:"book-category"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.bookCategory=e.target.multiple?o:o[0]}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("Choose Book Category")]),o("option",{attrs:{selected:""},domProps:{value:t.bookCategory}},[t._v(t._s(t.bookCategory))]),t._l(t.categories,function(e,r){return o("option",{key:r,domProps:{value:e}},[t._v("\n                "+t._s(e)+"\n              ")])})],2)]),o("div",[t._m(3),o("input",{directives:[{name:"model",rawName:"v-model",value:t.yearOfPub,expression:"yearOfPub"}],attrs:{type:"text",name:"",id:"year",required:"required",placeholder:"1995"},domProps:{value:t.yearOfPub},on:{input:function(e){e.target.composing||(t.yearOfPub=e.target.value)}}})]),o("div",[o("button",{attrs:{type:"submit"},on:{click:t.updateBook}},[t._v("Update Book Record")])])])])])]),o("Footer")],1)},ut=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"title"}},[t._v("\n              Book Title\n              "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"author-name"}},[t._v("\n              Author\n              "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"book-category"}},[t._v("\n              Book Category\n              "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"year"}},[t._v("\n              Year of Publication\n              "),o("span",{staticClass:"required"},[t._v("*")])])}],ct={components:{Navigation:_,Footer:C},data:function(){return{title:"",author:"",edition:"",qty:"",yearOfPub:"",bookCategory:"",id:"",categories:[]}},methods:{updateBook:function(){var t={title:this.title,author:this.author,edition:this.edition,category:this.bookCategory,quantity:this.qty,publicationYear:this.yearOfPub},e="/books/update/".concat(this.id);fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:L()(t)}).then(function(t){return t.json()}).then(function(t){console.log("Success:",L()(t))}).catch(function(t){console.log("Error:",t)})}},mounted:function(){var t=this,e=window.localStorage.getItem("user");if(e){var o=this.$route.params.id;return fetch("/books/getOne/".concat(o)).then(function(t){return t.json()}).then(function(e){t.title=e.title,t.author=e.author,t.edition=e.edition,t.qty=e.quantity,t.bookCategory=e.category,t.yearOfPub=new Date(e.publicationYear).getFullYear(),t.id=e._id}),fetch("/books/categories").then(function(t){return t.json()}).then(function(e){return t.categories=e.slice()}),!0}this.$router.push("/")}},lt=ct,dt=(o("cf9e"),Object(i["a"])(lt,st,ut,!1,null,"5862659b",null)),vt=dt.exports,mt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"request"}},t._l(t.requestArray,function(e,r){return o("div",{key:r,attrs:{id:"book-request"}},[o("div",{staticClass:"user"},[o("h2",[t._v(t._s(e.bookId.title))]),o("h6",[t._v(t._s(e.requesterName)+" requested for this book")])]),t.isAdmin?o("div",{staticClass:"actions"},[o("button",{on:{click:function(o){return t.approveBook(e._id)}}},[t._v("Approve")])]):o("div",{staticClass:"actions"},[o("div",{class:{active:"approved"==e.status},attrs:{id:"indicator"}},[o("p",[t._v(t._s(e.status))])])])])}),0),o("Footer")],1)},ft=[],pt=o("5d73"),ht=o.n(pt),gt={components:{Navigation:_,Footer:C},data:function(){return{isAdmin:!1,isActive:!1,requestArray:[]}},created:function(){var t=this,e=JSON.parse(window.localStorage.getItem("user"));if("admin"==e.status)this.isAdmin=!0,fetch("/requests").then(function(t){return t.json()}).then(function(e){console.log(e),t.requestArray=e.slice()});else{var o=!0,r=!1,a=void 0;try{for(var n,i=ht()(e.bookRequests);!(o=(n=i.next()).done);o=!0){var s=n.value;console.log(s),fetch("/requests/one/".concat(s)).then(function(t){return t.json()}).then(function(e){t.requestArray.push(JSON.parse(L()(e)))})}}catch(u){r=!0,a=u}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}}},methods:{approveBook:function(t){console.log(t),fetch("/requests/approveRequest/".concat(t)).then(function(t){return t.json()}).then(function(t){"sucessful"!=t.status?alert("Error occured while approving the book"):alert("Book Approved")})}}},_t=gt,yt=(o("b10f"),Object(i["a"])(_t,mt,ft,!1,null,"9844fc5e",null)),bt=yt.exports,kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t._m(0),o("div",{attrs:{id:"wraps"}},[o("div",{attrs:{id:"forms"}},[t._m(1),o("div",{staticClass:"user-forms"},[t.authenticating?o("Loader"):t._e(),o("div",{staticClass:"active",attrs:{id:"login"}},[o("h1",[t._v("Login")]),o("form",{attrs:{name:"login"},on:{submit:function(t){t.preventDefault()}}},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.logEmail,expression:"logEmail"}],attrs:{type:"email",name:"",id:"logemail",placeholder:"Email Address"},domProps:{value:t.logEmail},on:{input:function(e){e.target.composing||(t.logEmail=e.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.logPassword,expression:"logPassword"}],attrs:{type:"password",id:"logpassword",placeholder:"Password"},domProps:{value:t.logPassword},on:{input:function(e){e.target.composing||(t.logPassword=e.target.value)}}})]),o("div",[o("input",{attrs:{type:"submit",value:"Login"},on:{click:t.login}})])])]),o("div",{attrs:{id:"signup"}},[o("h1",[t._v("Sign up")]),o("form",{attrs:{name:"register"},on:{submit:function(t){t.preventDefault()}}},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.regEmail,expression:"regEmail"}],attrs:{type:"email",name:"",id:"email",placeholder:"Email Address"},domProps:{value:t.regEmail},on:{input:function(e){e.target.composing||(t.regEmail=e.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.regPassword,expression:"regPassword"}],attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:t.regPassword},on:{input:function(e){e.target.composing||(t.regPassword=e.target.value)}}})]),o("div",[o("select",{directives:[{name:"model",rawName:"v-model",value:t.regCategory,expression:"regCategory"}],attrs:{name:"category",id:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.regCategory=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"",disabled:""}},[t._v("Choose User Category")]),o("option",{attrs:{value:"student"}},[t._v("Student")]),o("option",{attrs:{value:"staff"}},[t._v("Staff")])])]),o("div",[o("input",{attrs:{type:"submit",value:"Register"},on:{click:t.signup}})])])])],1)])]),t._m(2)])},wt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"navigation-color",attrs:{id:"navigation"}},[o("div",{staticClass:"brandName"},[o("a",{attrs:{href:"/"}},[t._v("Book Information Retrieval System")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"links"},[o("div",[o("p",{staticClass:"active",attrs:{id:"login"}},[t._v("Login")])]),o("div",[o("p",{attrs:{id:"signup"}},[t._v("Sign up")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer-color",attrs:{id:"footer"}},[o("h6",[t._v("\n      © 2019\n    ")])])}],qt={components:{Loader:M},data:function(){return{logEmail:"",logPassword:"",regEmail:"",regPassword:"",regCategory:"",authenticating:!1}},mounted:function(){for(var t=document.querySelectorAll("div.links div p"),e=function(e){var o=t[e];o.addEventListener("click",function(t){var e=document.querySelector("p.active");e.classList.remove("active"),o.classList.add("active");var r=t.target.id,a=document.querySelector("div.user-forms div.active");a.classList.remove("active"),document.querySelector("div#".concat(r)).classList.add("active")})},o=0;o<t.length;o++)e(o)},methods:{login:function(){var t=this;this.authenticating=!0,""!==this.logEmail&&""!==this.logPassword?fetch("/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:L()({username:this.logEmail,password:this.logPassword})}).then(function(t){return t.json()}).then(function(e){var o=e;"invalid password"===e.message?alert("Incorrect Password"):"unknown user"===e.message?alert("This account doesnt exist"):(window.localStorage.setItem("user",L()(o)),t.$router.push("/Home"))}).catch(function(t){console.log(t)}):this.$router.push("/")},signup:function(){var t=this;""!==this.regEmail&&""!==this.regPassword&&""!==this.regCategory?fetch("/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:L()({username:this.regEmail,password:this.regPassword,status:this.regCategory})}).then(function(t){return t.json()}).then(function(e){var o=e;window.localStorage.setItem("user",L()(o)),t.$router.push("/Home")}).catch(function(t){alert("An error occured while creating an account")}):""==this.regEmail||""==this.regPassword||""==this.regCategory?alert("All fields are required here"):this.$router.push("/")}}},Ct=qt,Bt=(o("2ff8"),Object(i["a"])(Ct,kt,wt,!1,null,"7e73872b",null)),Pt=Bt.exports,St=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{staticClass:"wr"},t._l(t.childrenBooks,function(e,r){return o("div",{key:r,attrs:{id:"book-search-result-card"}},[o("h4",[t._v("\n        "+t._s(e.title)+" -\n        "),o("b",[t._v("ID:"+t._s(e._id))])]),o("h5",[t._v(t._s(e.author))]),o("h6",[t._v(t._s(new Date(e.publicationYear).getFullYear()))]),o("h6",[t._v(t._s(e.edition))]),o("h3",[t._v("\n        STATUS:\n        "),0==e.requested?o("b",[t._v("Available")]):o("b",[t._v("Not Available")])]),o("div",[1!=e.requested?o("button",{attrs:{id:"request"},on:{click:function(o){return t.requestBook(e._id)}}},[t._v("request for this book")]):t._e()])])}),0),o("Footer")],1)},xt=[],Et={components:{Navigation:_,Footer:C},data:function(){return{childrenBooks:[]}},methods:{requestBook:function(t){var e=JSON.parse(window.localStorage.getItem("user")),o=e._id,r=e.username;fetch("/requests/addRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:L()({userId:o,requesterName:r,bookId:t})}).then(function(t){return t.json()}).then(function(t){window.localStorage.setItem("user",L()(t)),alert("Book as being requested")})}},mounted:function(){var t=this,e=this.$route.params.id;fetch("/books/children/".concat(e)).then(function(t){return t.json()}).then(function(e){t.childrenBooks=e.slice(),console.log(t.childrenBooks)})}},Nt=Et,Ot=(o("5e29"),Object(i["a"])(Nt,St,xt,!1,null,"237e682b",null)),$t=Ot.exports;r["a"].use(l["a"]);var jt=new l["a"]({routes:[{path:"/",name:"login",component:Pt},{path:"/Home",name:"home",component:A},{path:"/createBook",name:"createBook",component:K},{path:"/search",name:"search",component:it},{path:"/updateBook/:id",name:"updateBook",component:vt},{path:"/viewRequest",name:"requestBook",component:bt},{path:"/viewBooks/:id",name:"ViewBook",component:$t}]}),At=o("2f62");r["a"].use(At["a"]);var Rt=new At["a"].Store({state:{},mutations:{},actions:{}});r["a"].config.productionTip=!1,new r["a"]({router:jt,store:Rt,render:function(t){return t(c)}}).$mount("#app")},"5b7d":function(t,e,o){"use strict";var r=o("cc04"),a=o.n(r);a.a},"5e29":function(t,e,o){"use strict";var r=o("857c"),a=o.n(r);a.a},"64a9":function(t,e,o){},"6f6b":function(t,e,o){"use strict";var r=o("2b43"),a=o.n(r);a.a},"857c":function(t,e,o){},9028:function(t,e,o){"use strict";var r=o("2044"),a=o.n(r);a.a},"9e64":function(t,e,o){"use strict";var r=o("14ef"),a=o.n(r);a.a},b10f:function(t,e,o){"use strict";var r=o("4cf4"),a=o.n(r);a.a},b35c:function(t,e,o){"use strict";var r=o("0918"),a=o.n(r);a.a},cc04:function(t,e,o){},cd36:function(t,e,o){"use strict";var r=o("0ea5"),a=o.n(r);a.a},cf9e:function(t,e,o){"use strict";var r=o("dcaf"),a=o.n(r);a.a},dcaf:function(t,e,o){},e162:function(t,e,o){"use strict";var r=o("2976"),a=o.n(r);a.a}});
//# sourceMappingURL=app.1ce17f5a.js.map